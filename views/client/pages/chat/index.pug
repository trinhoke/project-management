extends ../../layouts/default.pug

block content
  .container.mt-5
    h2.text-center.mb-5.font-weight-bold.text-primary Chat Room
    .row
      .col-12
        .card
          .card-header.bg-primary.text-white
            h5.text-center.font-weight-bold Chat Room
          .card-body(chat-room)
            .chat-box
              ul.list-group
                if(messages.length == 0)
                    li.list-group-item.text-center No messages yet
                else
                    each message in messages
                        li.list-group-item
                            .d-flex.align-items-start
                                if(message.userInfo.avatar)
                                    img.rounded-circle(
                                    src=message.userInfo.avatar 
                                    alt=message.userInfo.fullName
                                    style="width: 40px; height: 40px;"
                                    )
                                else
                                    img.rounded-circle(src="https://via.placeholder.com/40" alt=message.userInfo.fullName)
                                .ml-3
                                    .d-flex.justify-content-between.align-items-center
                                        p.font-weight-bold.mb-1= message.userInfo.fullName
                                        small.text-muted= message.createdAt
                                    p.mb-1= message.content
            form(action="/chat/send", method="post")
              .form-group
                label(for="message") Message
                input.form-control(type="text" name="message" placeholder="Enter your message")
              button(type="submit" class="btn btn-primary mt-2") Send